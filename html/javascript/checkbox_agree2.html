<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>checkbox</title>
    <link rel="stylesheet" href="../../css/reset.css"/>
    <link rel="stylesheet" href="../../css/layout.css"/>
    <link rel="stylesheet" href="../../css/common.css"/>
    <link rel="stylesheet" href="../../css/contents.css"/>
</head>
<body>

    <div id="wrap">
        <h2 class="title">요구 조건 : 전체 동의 기능</h2>
        

        <div class="example-box vanila">
            <p class="txt-desc">자바스크립트</p>
            <div class="inp-chk">
                <label for="chkV1">동의함</label>
                <input type="checkbox" id="chkV1" name="" data-info="agree">
            </div>
            <div class="inp-chk">
                <label for="chkNot1">동의 하지 않음</label>
                <input type="checkbox" id="chkNot1" name="">
            </div>
            <div class="inp-chk">
                <label for="chkV2">동의함</label>
                <input type="checkbox" id="chkV2" name="" data-info="agree">
            </div>
            <div class="inp-chk">
                <label for="chkNot2">동의 하지 않음</label>
                <input type="checkbox" id="chkNot2" name="">
            </div>
            <div class="inp-chk">
                <label for="chkV3">동의함</label>
                <input type="checkbox" id="chkV3" name="" data-info="agree">
            </div>
            <div class="inp-chk">
                <label for="chkNot3">동의 하지 않음</label>
                <input type="checkbox" id="chkNot3" name="">
            </div>
            <div class="inp-chk">
                <label for="chkV_all">전체 동의함</label>
                <input type="checkbox" id="chkV_all" name="">
            </div>
        </div>

        <div class="memo-box">
            <p class="title">메모</p>
        </div>
    </div>
    <!-- script --> 
    <script>
        const $scriptArea = document.querySelector(".vanila");
        const $chk = $scriptArea.querySelectorAll("input[type=checkbox][data-info=agree]:not(#chkV_all)")
        const $chk_all = $scriptArea.querySelector("#chkV_all")
        // 모두 체크/해제
        $chk_all.addEventListener("change",function(e){
            
            $chk.forEach(function(item){
                if(e.target.checked) item.checked = true
                else item.checked = false       
            })
        })
        //개별 체크 박스 제어
        $chk.forEach(function(item){
            item.addEventListener("change",function(e){
                let $chk_num = $scriptArea.querySelectorAll("input[type=checkbox]:not(#chkV_all):checked")                
                if($chk_num.length == $chk.length) $chk_all.checked = true
                else $chk_all.checked = false
                
            })
 
        })
        
    </script>

</body>
</html>